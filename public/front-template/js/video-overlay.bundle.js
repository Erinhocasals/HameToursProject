(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{235:function(t,e,i){"use strict";i.r(e);var n=i(0),o=i(258),a=i(296),r=i(112),s=i(9);function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=function(){function t(){var e,i,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(t){var e=document.createElement("script");e.src="https://player.vimeo.com/api/player.js",e.onload=t;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)},(i="_loadPlayer")in(e=this)?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n}var e,i,n;return e=t,(i=[{key:"create",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(window.Vimeo&&window.Vimeo.Player){var n=new window.Vimeo.Player(t,i);return i.onReady&&"function"==typeof i.onReady&&i.onReady(n),n}this._loadPlayer((function(){return e.create(t,i)}))}}])&&l(e.prototype,i),n&&l(e,n),t}(),c=new u;function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d=function(){function t(e){var i=this,n=e.el,s=e.config,l=void 0===s?{}:s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,"_transitionInCompleteHandler",(function(){i.ui.videoPlayer||i._createVimeoPlayer()})),y(this,"_transitionOutCompletHandler",(function(){i._isTransitioning=!1,r.a.clear()})),y(this,"_clickBackgroundHandler",(function(){i._transitionOut()})),y(this,"_clickCloseHandler",(function(){i._transitionOut()})),y(this,"_clickContainerHandler",(function(){i._vimeoPlayer?i._vimeoPlayer.play():(i.ui.videoPlayer&&!i._hasUIVideoPlayerPlayed&&(i._hasUIVideoPlayerPlayed=!0,i._hidePoster(),i.ui.videoPlayer.play()),i._isPlayRequestedWhileLoading=!0)})),y(this,"_vimeoPlayerReadyHandler",(function(t){i._vimeoPlayer=t,i._vimeoPlayer.on("play",i._vimeoPlayerPlayHandler),i._isPlayRequestedWhileLoading&&i._vimeoPlayer.play()})),y(this,"_vimeoPlayerPlayHandler",(function(){i._hidePoster()})),this._config=l,this.ui={background:n.querySelector(".js-background"),content:n.querySelector(".js-content"),container:n.querySelector(".js-container"),vimeoPlayer:n.querySelector(".js-vimeo-player"),videoPlayer:n.querySelector(".js-video-player"),poster:n.querySelector(".js-poster"),buttonPlay:n.querySelector(".js-button-play"),buttonPause:n.querySelector(".js-button-pause"),buttonClose:n.querySelector(".js-button-close"),buttonVideoPlay:n.querySelector(".js-button-video-play")},this.components={buttonClose:new o.a({el:this.ui.buttonClose}),buttonVideoPlay:new a.default({el:this.ui.buttonVideoPlay})},this._setupEventListeners(),this._transitionInit(),this._transitionIn()}var e,i,l;return e=t,(i=[{key:"destroy",value:function(){this._removeEventListeners(),this._killTimelines(),this.components.buttonClose.destroy()}},{key:"_setupEventListeners",value:function(){this.ui.background.addEventListener("click",this._clickBackgroundHandler),this.ui.container.addEventListener("click",this._clickContainerHandler),this.ui.buttonClose.addEventListener("click",this._clickCloseHandler)}},{key:"_removeEventListeners",value:function(){this.ui.buttonClose.removeEventListener("click",this._handleClick),this._vimeoPlayer&&this._vimeoPlayer.off(this._vimeoPlayerPlayHandler)}},{key:"_transitionInit",value:function(){this.ui.background.style.transform="matrix(1.0, 0.0, 0.0, 0.0, 0, 0)";var t=this.ui.container.clientHeight;this.ui.content.style.transform="matrix(1.0, 0.0, 0.0, 1.0, 0, ".concat(t,")"),this.ui.container.style.transform="matrix(1.0, 0.0, 0.0, 1.0, 0, ".concat(-t,")")}},{key:"_transitionIn",value:function(){this._tlTransitionOut&&(this._tlTransitionOut.kill(),this._tlTransitionOut=null),this._tlTransitionIn=n.a.timeline({onComplete:this._transitionInCompleteHandler}),this._tlTransitionIn.set(this.ui.background,{transformOrigin:"0 100%"}),this._tlTransitionIn.to(this.ui.background,{scaleY:1,duration:1.2,ease:s.c},0),this._tlTransitionIn.to(this.ui.content,{y:0,duration:1.2,ease:s.c},.4),this._tlTransitionIn.to(this.ui.container,{y:0,duration:1.2,ease:s.c},.4),this._tlTransitionIn.add(this.components.buttonVideoPlay.getTweenTransitionIn(),.8),this._tlTransitionIn.add(this.components.buttonClose.getTweenTransitionIn(),1.2)}},{key:"_transitionOut",value:function(){if(!this._isTransitioning){this._isTransitioning=!0,this._tlTransitionIn&&(this._tlTransitionIn.kill(),this._tlTransitionIn=null);var t=this.ui.container.clientHeight+10;this._tlTransitionOut=n.a.timeline({onComplete:this._transitionOutCompletHandler}),this._tlTransitionOut.set(this.ui.background,{transformOrigin:"0 0"}),this._tlTransitionOut.to(this.ui.content,{y:-t,duration:1,ease:s.c},0),this._tlTransitionOut.to(this.ui.container,{y:t,duration:1,ease:s.c},0),this._tlTransitionOut.add(this.components.buttonClose.getTweenTransitionOut(),0),this._tlTransitionOut.to(this.ui.background,{autoAlpha:0,duration:.6,ease:"sine.out"},.4)}}},{key:"_createVimeoPlayer",value:function(){c.create(this.ui.vimeoPlayer,{url:this._config.url,responsive:!0,onReady:this._vimeoPlayerReadyHandler})}},{key:"_killTimelines",value:function(){this._tlTransitionIn&&(this._tlTransitionIn.kill(),this._tlTransitionIn=null),this._tlTransitionOut&&(this._tlTransitionOut.kill(),this._tlTransitionOut=null)}},{key:"_hidePoster",value:function(){n.a.to(this.ui.poster,{autoAlpha:0,duration:.5,ease:"sine.out"})}}])&&h(e.prototype,i),l&&h(e,l),t}();e.default=d}}]);